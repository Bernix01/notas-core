language: node_js
node_js:
- 4.2.3
cache:
  directories:
  - node_modules
matrix:
  fast_finish: true
  allow_failures:
  - node_js: 5.1.1
before_script:
- sudo apt-get install -y libkrb5-dev
- npm install -g bower grunt-cli
- bower install
script:
- grunt test
- grunt test:coverage
services: mongodb
after_success:
- grunt coveralls
- grunt build
deploy:
  provider: heroku
  skip_cleanup: true
  strategy: git
  before_deploy:
  - echo 'ready?'
  - sed 'dist' .gitignore
  - modified .gitignore
  api_key:
    secure: AYin8QeAfE8LdzKdNLsQQDzHcQIA9kNfgRNHyGjnjZHAMW75UoVnK2uY8soRJm950NhcFFmLl2T9XJ2crq6ga3Xq9cU4Me7KVpj4HdOo/RcMZr0lfgYVm1ntluKfCJfiacn9DD9VQm9EvFU5p4jUkAe67muRfvhloJVMFkJ1mfcHRVFaGzjJWQsNymc5yUgbj8EZb67+t6ED/fSTojjyWF0YOB0c7iKovC0fsV+Vc8VGMSp6gLHriY1JnzLoZ7h8ibWybL5GPDGhAogryM9zYuRKW9O6cg5imPxxlXgpvR3IKnqOrMV/a6HO+fEx4neAHV/wo+TBbEf5omDodaFbzqe6jNh1F3YB6LkknAlTCSkXsg7CD+AziAHXLybDb2PRuQCEAl4LWVJAX/k8x1O+/aHJjuZH6Ej5clequIA4D3UwfrmuQ+DJdKF6IFzvXhbH4IZWKrbaTTHvMvSggP67psi8aLol439giQWgd+92qjyq3JA4Ze9VFa57Ens5EZ07NOkZJdI/5W4nX5IbxaleXYLiRPI41CgcWwQcTSA5XqeE1jcIpNc+U9yK4Ez6FKsjoD7tBqWBEuwvEKdoPxTPNf64r2F0PDIhjioKSmVcXEbqW7ve/fvjEO4UGHZpqw1y3/SNCSeRoxUmEykjf2J2YM3rMU2J6s/F4J0WJE1m7oY=
  app: notas-core
  on: master
